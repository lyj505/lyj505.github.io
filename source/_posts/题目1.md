---
title: 题目
date: 2016-06-12 14:01:13
tags: [移动端布局]
categories: [手机坑]
---


# 网络题目

## 原版demo[点击](http://lyjnc.me/lyjblog/demo%E6%B5%8B%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98/niuniudaikuan.html)
  1. chromePC版打开没什么问题。
  2. FF和IE对box属性支持度不高。
  3. 手机可以运行测试了:ip6 /android 版本 5/6  ..及微信端。chrome PC版模拟浏览器可以支持。
  4. 关于动态:轮播、选项卡、jquery切换。
   <!--more-->
  5. 有点问题:选项卡那个有点问题就是border-bottom无法变窄。我从mui里弄出来的

### 之前使用的一些方法
   1. 之前强制将轮播图中每个图片的高度强制设成img的高度/2/16【转换成rem】。后来发现可以将其删掉,相当于直接将图片引入不用设置高度和宽度也可以使用。
   2. 第二部分布局使用了百分比布局,左右各%50,然后利用
   ```
   text-align:center
   ```
   将其元素水平居中。对要垂直居中的元素使用
   ```
   vertical-align: middle;
   ```
   就可以垂直居中了。
   3.下一部分问题

## 重新审视
## 问题很多,需要一个一个解决
  1. 第二部分垂直居中的元素只需要对包含文字的元素使用
  ```
  vertical-align: middle;
  ```
  即可以垂直居中。
  2. 之后发现还是要2者都要加上这个属性才能垂直居中。不能单独加一项。
  3. 当父级元素设置了
  ```
  .media-body{vertical-align:middle;display:table-cell;}
  ```
  子元素要实现完全垂直居中每一个还需要加上
  ```
  vertical-align:middle;
  ```
  。当父元素设置了tablecell属性后,则如果再设置line-height,table cell居中效果会消失。其实并不是效果会消失,只是会冲突,不能精准得保证元素的位置了。
  4. 下一部分我采用的是box弹性盒子布局,在chrome和手机端(微信端的内核其实也是基于webkit)能运行,但是在FF/IE上就不能保证了。一看FF和IE就发现是弹性盒子里的代码出了问题。


```
<div class="f_box" style="padding-left:1rem;height:100%;">
 <div class="one_box box_orient_v">
   <div class="box_orient_h f_box afff">
     <div class="one_box " style="width:2rem;margin-top:0.5rem;">
       <span class="bold">生财宝</span>
       <span style="border-radius:50%;border:1px solid #fff;font-size:0.7rem;padding: 0.2rem 0.3rem;vertical-align:text-top;">稳</span>
     </div>
   </div>
   <div style="margin-top:0.2rem;font-size:10px;" class="afff" >更多生财之道,你值得拥有......</div>
   <div>
     <div class="dianji bold" style="font-size:14px;" >点击查看</div>
   </div>
 </div>
 <div class="n_box money2"></div>
 <div class="n_box gt"></div>
</div>
```
   5. 查看了下ff的审查元素,发现f_box 占有的宽度不足导致变形,然后将其width:100%; FF的图片出来了,但是ie依旧有问题,然后将

```
height:100%;
```
删掉.
   6. 检查了原来是ie没有做兼容前缀
```

   .f_box{
 display:-moz-box;
  display:-webkit-box;
  display:-o-box;
  display: -ms-flexbox;  /*ie专属兼容*/
  display:box;
}

   one_box{
   -ms-flex: 1;   /*ie专属兼容*/
  -moz-box-flex:1;
  -o-box-flex:1;
  -webkit-box-flex:1;
   box-flex:1;
}
.two_box{
   -ms-flex: 2;   /*ie专属兼容*/
  -moz-box-flex:2;
  -o-box-flex:2;
  -webkit-box-flex:2;
   box-flex:2;
}
```
  7.则基本效果是出来了,但是元素的大小和其他浏览器还是又差距。发现了给父元素限制了个2rem的宽度,导致元素放不下而换行了。
  8.由于之前没考虑这么多,就直接用的margin调整距离,但是这样结构上不稳定,还是使用
```
  box-pack:justify;
```
  比较稳定。但是要注意将父元素加上

```
  flex:box
```
的属性才行。
  9.发现了一个问题,
```
  <span>1</span>
  <span>2</span>
   /*像这样换行的在chrome里解析会有一个空格,在firefox里解析不会出现空格,即firefox处理html文档时,将其收缩在一行了*/
```
  10.下一部分的垂直居中利用的是line-height等于height。
  11. 在FF下如果已经在一个父元素a
```
  box-flex:1;
```
  并做了兼容前缀里还有3个子元素,该父容器a的宽度会由最大的宽度的子元素c决定,如果为了让b的宽度不等于最大的宽度c的宽度（其实是等于的是让b中的子元素不等于c的宽度）,则需要在b子元素里再嵌套一个带宽度的盒子d,让FF浏览器识别了d的父元素b还是等于c的宽度。有点复杂。举个例子。

```
 <div class="box_wraper container " style="overflow:hidden;">
    <div class=" hehe box_1 item1 box_wraper" >
    <div style="width:50px;">11111</div>
    </div>
        <div class=" hehe box_1 item2">2222</div>
            <div class=" hehe box_1 item3">3333</div>
                <div class=" hehe box_1 item4">4444</div>
    </div>
```

12.之前对某一部分布局设置了高度,在FF上出了点问题，IE/chrome都没有问题,就是因为子元素高度大于了父元素高度,导致无法再垂直方向上box_pack_justify,然后将高度省去了,就可以解决FF的尴尬之处。说明有时候移动端不一定要固定height来布局的。当用box弹性盒子布局。
13.调试字体的时候chrome模拟器表现往往不完全。（版本 chrome 50.0.2661.102 m）。
14.ie在支持box-orient:vertical;不好,不支持,如果不设置height会导致其他元素的高度出现问题。
15.实际上当不设置height,如果在主轴的方向在垂直方向上,则box-pack:justify,也没有什么作用。
16.最后通过设置height,将IE浏览器的垂直方向上的不兼容解决了（设置新版的flex-direction）,再将FF浏览器在垂直方向上无法布局,(这里必须将flex设置在最后,最后渲染将FF浏览器的老式box覆盖掉,然后再设置新的justify-content:between。。就可以兼容很多浏览器了)。然而下面又蹦了。
17.貌似新版的flex:1;display:flex;ie/chrome/FF/360渲染较好。flex在ie10.11还是表现的不错,在以下的就老火了。所以如果不考虑老版的浏览器,之前遇到个坑貌似4.4的安卓对flex支持不好,可以使用flex布局。
18.才发现。mui对ie和ff的轮播和选项卡支持度不高。。
19.当使用table-cell垂直居中的时候,如果有元素使用了float:right,即使在对齐元素内加:vertical-align:middle;结构会被破坏垂直居中的结构,所以建议使用绝对定位,然后给要浮动到右边的元素加高度设置margin值达到垂直居中的效果。
20.ie..太坑了由于对绝对定位使用百分比的解析不同,所以使用具体的值,需要给定位的元素的父元素设置高度,取top=1/2父元素高度,方可兼容ie。
21.解决了以上问题,最终兼容了PC版IE/FF/CHROME/360/手机微信端/QQ浏览器/本地浏览器。

## 修正版demo[点击](http://lyjnc.me/lyjblog/demo%E6%B5%8B%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E4%BF%AE%E6%94%B9%EF%BC%89/niuniudaikuan.html)

### 测试后FF/IE/CHROME/360/微信端H5/Android5.0及以上/ios9.0以上均可兼容了。

