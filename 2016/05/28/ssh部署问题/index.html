<!doctype html>
<html>
<head>
<meta name="baidu-site-verification" content="T1DymlrMyg" />
<meta name="google-site-verification" content="8_kky-R3LwbIRThdxPCE0hOPmITxkyTwO_vwgFNC_xs" />
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />




















  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  







<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />
<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />












  <meta name="keywords" content="ssh,git," />





  <link rel="alternate" href="/atom.xml" title="lyjBlog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/123.ico?v=5.0.1" />






<meta name="description" content="SSH远程部署失败1.本机以前有一个ssh已经远程存在github中,昨天又重新生成了一个ssh密匙,当我重新hexo g -d 远程部署博客的时候出现了以下代码:">
<meta property="og:type" content="article">
<meta property="og:title" content="ssh部署问题">
<meta property="og:url" content="http://lyjnc.me/2016/05/28/ssh部署问题/index.html">
<meta property="og:site_name" content="lyjBlog">
<meta property="og:description" content="SSH远程部署失败1.本机以前有一个ssh已经远程存在github中,昨天又重新生成了一个ssh密匙,当我重新hexo g -d 远程部署博客的时候出现了以下代码:">
<meta property="og:updated_time" content="2016-05-28T14:21:58.797Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ssh部署问题">
<meta name="twitter:description" content="SSH远程部署失败1.本机以前有一个ssh已经远程存在github中,昨天又重新生成了一个ssh密匙,当我重新hexo g -d 远程部署博客的时候出现了以下代码:">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: "",
    fancybox: false,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    root: '/',
    algolia: {
          applicationID: 'N5BB54Q7CK',
          apiKey: 'cd33d69bf490ade81e58f08fd7bd2c7e',
          indexName: 'lyjnc',
          hits: {"per_page":5},
          labels: {"input_placeholder":"搜索...","hits_empty":"未发现与 「${query}」相关的内容","hits_stats":"${hits} 条相关条目，使用了 ${time} 毫秒"}
        }
  };
</script>


  <title> ssh部署问题 | lyjBlog </title>
</head>

<body>

  










  
  

  <div class="container one-collumn  page-post-detail ">


    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">


      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">lyjBlog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section" >
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section" >
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section" >
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section" >
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section" >
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>


             <div style="width:80%;margin:0 auto;height:10px;">
 <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="http://music.163.com/outchain/player?type=2&id=22768523&auto=0&height=66"></iframe></div>
      </div>
 
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="lyjloveDT" />
          <p class="site-author-name" itemprop="name">lyjloveDT</p>
          <p class="site-description motion-element" itemprop="description">Only One Life To Live!</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element ">

              <span class="links-of-author-item">
                <a href="https://github.com/lyj505" target="_blank" rel="external nofollow">
                    <i class="fa fa-github"></i> GitHub
                </a>
              </span>

              <span class="links-of-author-item">
                <a href="http://steamcommunity.com/profiles/76561198098519946/" target="_blank" rel="external nofollow">
                    <i class="fa fa-steam"></i> Steam
                </a>
              </span>



        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SSH远程部署失败"><span class="nav-number">1.</span> <span class="nav-text">SSH远程部署失败</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#公钥与私钥"><span class="nav-number">1.1.</span> <span class="nav-text">公钥与私钥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决过程"><span class="nav-number">1.2.</span> <span class="nav-text">解决过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#方法1"><span class="nav-number">1.2.1.</span> <span class="nav-text">方法1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法2"><span class="nav-number">1.2.2.</span> <span class="nav-text">方法2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法3"><span class="nav-number">1.2.3.</span> <span class="nav-text">方法3</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结果"><span class="nav-number">1.3.</span> <span class="nav-text">结果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结一下"><span class="nav-number">1.4.</span> <span class="nav-text">总结一下</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#push的时候出现的状况"><span class="nav-number">1.5.</span> <span class="nav-text">push的时候出现的状况</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#验证是不是主人"><span class="nav-number">1.5.1.</span> <span class="nav-text">验证是不是主人</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        

    </header>



    <main id="main" class="main" style="margin-top: 100px;">
      <div class="main-inner">
      <!--关闭本页访问数-->
         <!--  <div id="detail_counter" style="text-align:center;"></div> -->
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                ssh部署问题
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-28T20:58:00+08:00" content="2016-05-28">
              2016-05-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ssh/" itemprop="url" rel="index">
                    <span itemprop="name">ssh</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ssh/git/" itemprop="url" rel="index">
                    <span itemprop="name">git</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="SSH远程部署失败"><a href="#SSH远程部署失败" class="headerlink" title="SSH远程部署失败"></a>SSH远程部署失败</h1><p>1.本机以前有一个ssh已经远程存在github中,昨天又重新生成了一个ssh密匙,当我重新hexo g -d 远程部署博客的时候出现了以下代码:<br>                                <a id="more"></a><br><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">nothing to commit, working directory clean</span><br><span class="line">Permission denied (publickey).</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br><span class="line">FATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class="line">Error: Permission denied (publickey).</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br><span class="line"></span><br><span class="line">    at ChildProcess.&lt;anonymous&gt; (G:<span class="symbol">\f</span>ront-end Web developer<span class="symbol">\h</span>exoblog<span class="symbol">\b</span>log<span class="symbol">\n</span>ode_modules<span class="symbol">\h</span>exo-util<span class="symbol">\l</span>ib<span class="symbol">\s</span>pawn.js:37:17)</span><br><span class="line">    at emitTwo (events.js:100:13)</span><br><span class="line">    at ChildProcess.emit (events.js:185:7)</span><br><span class="line">    at ChildProcess.cp.emit (G:<span class="symbol">\f</span>ront-end Web developer<span class="symbol">\h</span>exoblog<span class="symbol">\b</span>log<span class="symbol">\n</span>ode_modules<span class="symbol">\c</span>ross-spawn-async<span class="symbol">\l</span>ib<span class="symbol">\e</span>noent.js:37:29)</span><br><span class="line">    at maybeClose (internal/child_process.js:827:16)</span><br><span class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.js:211:5)</span><br><span class="line">FATAL Permission denied (publickey).</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br><span class="line"></span><br><span class="line">Error: Permission denied (publickey).</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br><span class="line"></span><br><span class="line">    at ChildProcess.&lt;anonymous&gt; (G:<span class="symbol">\f</span>ront-end Web developer<span class="symbol">\h</span>exoblog<span class="symbol">\b</span>log<span class="symbol">\n</span>ode_modules<span class="symbol">\h</span>exo-util<span class="symbol">\l</span>ib<span class="symbol">\s</span>pawn.js:37:17)</span><br><span class="line">    at emitTwo (events.js:100:13)</span><br><span class="line">    at ChildProcess.emit (events.js:185:7)</span><br><span class="line">    at ChildProcess.cp.emit (G:<span class="symbol">\f</span>ront-end Web developer<span class="symbol">\h</span>exoblog<span class="symbol">\b</span>log<span class="symbol">\n</span>ode_modules<span class="symbol">\c</span>ross-spawn-async<span class="symbol">\l</span>ib<span class="symbol">\e</span>noent.js:37:29)</span><br><span class="line">    at maybeClose (internal/child_process.js:827:16)</span><br><span class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.js:211:5)</span><br></pre></td></tr></table></figure></p>
<p>顿时十脸懵逼。。。。然后一怒之下我将github上里的公钥全部删除了。。。然后在本地重新生成ssh。之后就出现下面的问题。<br>对本机曾配置过的SSH key进行查询。可以不用进入.ssh的目录中查询,任意一个目录输入<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  <span class="keyword">ls</span> -<span class="keyword">al</span> ~/.ssh</span><br></pre></td></tr></table></figure></p>
<p>会出现以下：github_rsa  github_rsa.pub  id_rsa  id_rsa.pub  known_hosts。即使我远程的ssh删除了,本地的还没有删除。<br>呃。。因为这是我配置好了的文件,我就不删除以前生成的公钥了。<br>默认情况下每个账户生成的秘钥位置和名称都是相同的，这样后生成的秘钥就会覆盖前面的秘钥导致其失效。前面那2个钥匙是以前生成的,打开known_hosts可以清晰地知道本地有几次ssh的生成。(换句话说就是$ ssh-keygen -t rsa 了几次)。</p>
<h2 id="公钥与私钥"><a href="#公钥与私钥" class="headerlink" title="公钥与私钥"></a>公钥与私钥</h2><p>  首先我们需要区分加密和认证这两个基本概念。<br>　　加密是将数据资料加密，使得非法用户即使取得加密过的资料，也无法获取正确的资料内容，所以数据加密可以保护数据，防止监听攻击。其重点在于数据的安全性。身份认证是用来判断某个身份的真实性，确认身份后，系统才可以依不同的身份给予不同的权限。其重点在于用户的真实性。两者的侧重点是不同的。</p>
<h2 id="解决过程"><a href="#解决过程" class="headerlink" title="解决过程"></a>解决过程</h2><p>  1.输入$ ssh -T git@github.com  验证。<br>  2.出现 Permission denied (publickey)。</p>
<ol>
<li>说明一定是公钥的配置出了问题。然后我输入ssh -T -v git@github.com 。看看具体问题。</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">  OpenSSH_7<span class="number">.1</span>p1, OpenSSL <span class="number">1.0</span><span class="number">.2</span>d <span class="number">9</span> Jul <span class="number">2015</span></span><br><span class="line"><span class="string">debug1:</span> Reading configuration data <span class="regexp">/etc/</span>ssh/ssh_config</span><br><span class="line"><span class="string">debug1:</span> Connecting to github.com [<span class="number">192.30</span><span class="number">.252</span><span class="number">.128</span>] port <span class="number">22.</span></span><br><span class="line"><span class="string">debug1:</span> Connection established.</span><br><span class="line"><span class="string">debug1:</span> identity file <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_rsa type <span class="number">1</span></span><br><span class="line"><span class="string">debug1:</span> <span class="string">key_load_public:</span> No such file or directory</span><br><span class="line"><span class="string">debug1:</span> identity file <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_rsa-cert type <span class="number">-1</span></span><br><span class="line"><span class="string">debug1:</span> <span class="string">key_load_public:</span> No such file or directory</span><br><span class="line"><span class="string">debug1:</span> identity file <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_dsa type <span class="number">-1</span></span><br><span class="line"><span class="string">debug1:</span> <span class="string">key_load_public:</span> No such file or directory</span><br><span class="line"><span class="string">debug1:</span> identity file <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_dsa-cert type <span class="number">-1</span></span><br><span class="line"><span class="string">debug1:</span> <span class="string">key_load_public:</span> No such file or directory</span><br><span class="line"><span class="string">debug1:</span> identity file <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_ecdsa type <span class="number">-1</span></span><br><span class="line"><span class="string">debug1:</span> <span class="string">key_load_public:</span> No such file or directory</span><br><span class="line"><span class="string">debug1:</span> identity file <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_ecdsa-cert type <span class="number">-1</span></span><br><span class="line"><span class="string">debug1:</span> <span class="string">key_load_public:</span> No such file or directory</span><br><span class="line"><span class="string">debug1:</span> identity file <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_ed25519 type <span class="number">-1</span></span><br><span class="line"><span class="string">debug1:</span> <span class="string">key_load_public:</span> No such file or directory</span><br><span class="line"><span class="string">debug1:</span> identity file <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_ed25519-cert type <span class="number">-1</span></span><br><span class="line"><span class="string">debug1:</span> Enabling compatibility mode <span class="keyword">for</span> protocol <span class="number">2.0</span></span><br><span class="line"><span class="string">debug1:</span> Local version string SSH<span class="number">-2.0</span>-OpenSSH_7<span class="number">.1</span></span><br><span class="line"><span class="string">debug1:</span> Remote protocol version <span class="number">2.0</span>, remote software version libssh<span class="number">-0.7</span><span class="number">.0</span></span><br><span class="line"><span class="string">debug1:</span> no <span class="string">match:</span> libssh<span class="number">-0.7</span><span class="number">.0</span></span><br><span class="line"><span class="string">debug1:</span> Authenticating to github.<span class="string">com:</span><span class="number">22</span> <span class="keyword">as</span> <span class="string">'git'</span></span><br><span class="line"><span class="string">debug1:</span> SSH2_MSG_KEXINIT sent</span><br><span class="line"><span class="string">debug1:</span> SSH2_MSG_KEXINIT received</span><br><span class="line"><span class="string">debug1:</span> <span class="string">kex:</span> server-&gt;client chacha20-poly1305<span class="meta">@openssh</span>.com &lt;implicit&gt; none</span><br><span class="line"><span class="string">debug1:</span> <span class="string">kex:</span> client-&gt;server chacha20-poly1305<span class="meta">@openssh</span>.com &lt;implicit&gt; none</span><br><span class="line"><span class="string">debug1:</span> expecting SSH2_MSG_KEX_ECDH_REPLY</span><br><span class="line"><span class="string">debug1:</span> Server host <span class="string">key:</span> ssh-rsa <span class="string">SHA256:</span>nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8</span><br><span class="line"><span class="string">debug1:</span> Host <span class="string">'github.com'</span> is known and matches the RSA host key.</span><br><span class="line"><span class="string">debug1:</span> Found key <span class="keyword">in</span> <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/<span class="string">known_hosts:</span><span class="number">1</span></span><br><span class="line"><span class="string">debug1:</span> SSH2_MSG_NEWKEYS sent</span><br><span class="line"><span class="string">debug1:</span> expecting SSH2_MSG_NEWKEYS</span><br><span class="line"><span class="string">debug1:</span> SSH2_MSG_NEWKEYS received</span><br><span class="line"><span class="string">debug1:</span> Roaming not allowed by server</span><br><span class="line"><span class="string">debug1:</span> SSH2_MSG_SERVICE_REQUEST sent</span><br><span class="line"><span class="string">debug1:</span> SSH2_MSG_SERVICE_ACCEPT received</span><br><span class="line"><span class="string">debug1:</span> Authentications that can <span class="string">continue:</span> publickey</span><br><span class="line"><span class="string">debug1:</span> Next authentication <span class="string">method:</span> publickey</span><br><span class="line"><span class="string">debug1:</span> Offering RSA <span class="keyword">public</span> <span class="string">key:</span> <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_rsa</span><br><span class="line"><span class="string">debug1:</span> Authentications that can <span class="string">continue:</span> publickey</span><br><span class="line"><span class="string">debug1:</span> Trying <span class="keyword">private</span> <span class="string">key:</span> <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_dsa</span><br><span class="line"><span class="string">debug1:</span> Trying <span class="keyword">private</span> <span class="string">key:</span> <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_ecdsa</span><br><span class="line"><span class="string">debug1:</span> Trying <span class="keyword">private</span> <span class="string">key:</span> <span class="regexp">/c/</span>Users<span class="regexp">/taylorlovepeace/</span>.ssh/id_ed25519</span><br><span class="line"><span class="string">debug1:</span> No more authentication methods to <span class="keyword">try</span>.</span><br><span class="line">Permission denied (publickey).</span><br></pre></td></tr></table></figure>
<p>4.发现它一直在查找id_dsa、<br>id_ecdsa、id_ed25519这三个文件,然后出现错误。因为远程的被我删除了,本地的.ssh文件也被我删除了,都查询不到了。</p>
<p>首先 在本机上电脑创建ssh：<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>ssh-keygen -t rsa</span><br></pre></td></tr></table></figure></p>
<p>为什么会出现覆盖的情况呢？实际上是ssh的名字设置成相同了,所以内容会在相同路径下的.ssh文件下的公钥里进行覆盖,那么如何设置。</p>
<h3 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h3><p>ssh-keygen生成ssh 密钥的时候，会出现:<br>Enter file in which to save the key (/c/Users/taylorlovepeace/.ssh/id_rsa):<br>Enter file in which to save the key (“当前所在路径”): “取个名字”<br>这里随便起一个名字，这样问题就出来了，你起的这个名字没有和ssh内设定的名字保持一致，所以使用命令</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>ssh -T git<span class="variable">@github</span>.com</span><br></pre></td></tr></table></figure>
<p>会报错 Permission denied (publickey)。<br>   解决方法:<br>1)    给文件起名字的时候使用 ‘id_rsa’ 这个名字</p>
<p>2)    如果亲非要自己取名子，那就使用</p>
<p>ssh-add ~/.ssh/你的名字<br>将自己起的名字加入到ssh中这样再使用<br>ssh -T git@github.com 就会看到你想要的效果了。</p>
<p>。。呃,这个方法我最开始也没弄清楚到底怎么做,最后还是失败了,但后来整理的时候,觉得原理是对的,留下来先。<br>通过下面的方法</p>
<h3 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h3><p>在stackoverflow上找到一个方法,具体的戳<a href="http://stackoverflow.com/questions/2643502/git-permission-denied-publickey" target="_blank" rel="external">这里</a>解决了问题</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">First start by setting up your own public/private key pair set. This can use either DSA or RSA, so basically any key you setup will work. On most systems you can use ssh-keygen.</span><br><span class="line"></span><br><span class="line">First you'll want to cd into your .ssh directory. Open up the terminal and run:</span><br><span class="line">cd ~/.ssh &amp;&amp; ssh-keygen</span><br><span class="line">Next you need to copy this to your clipboard.</span><br><span class="line">On OS X run: cat id_rsa.pub | pbcopy</span><br><span class="line">On Linux run: cat id_rsa.pub | xclip</span><br><span class="line">On Windows (via Cygwin/Git Bash) run: cat id_rsa.pub | clip</span><br><span class="line">Add your key to your account via the website.</span><br><span class="line">Finally setup your .gitconfig.</span><br><span class="line">git config --global user.name "bob"</span><br><span class="line">git config --global user.email bob@... (don't forget to restart your command line to make sure the config is reloaded)</span><br><span class="line">Thats it you should be good to clone and checkout.</span><br></pre></td></tr></table></figure>
<p>当然首先也要和上面一样重新建一个新的ssh<br>四部曲(实际上是三步)：</p>
<ol>
<li><p>cd/到.ssh的第一级目录。 打开你的终端,我理解成win10下的git bash<br>2.将cat id_rsa.pub | clip 复制在你的剪切板里….好像并没有粘贴 。。。#后来搞懂它的意思了,实际上时一个命令但是在.ssh第一级目录下,打开gitbash,输入这段代码,就可以自动复制到剪切板里。。多么快？。。。<br>3.然后将id_rsa.pub 里的内容放到github你对应账号里的新添加的ssh里,title可以随便设置。<br>4.最后在git bash里输入对应的git config –global user.name ; git config –global user.email就成功了,<br>当你再次输入</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>ssh -T git<span class="variable">@github</span>.com</span><br></pre></td></tr></table></figure>
<p>就会出现你最想看到的画面:<br>Hi lyj505! You’ve successfully authenticated, but GitHub does not provide shell access.<br>其实原理就相当于重新建一个SSH重新配置一次,且正确设置公钥的名字,就能解决问题。</p>
</li>
</ol>
<h3 id="方法3"><a href="#方法3" class="headerlink" title="方法3"></a>方法3</h3><p>  呃,由于博主的百度云过期了。。我也没有尝试恢复以前的版本解决问题<br>  <a href="http://www.cognize.me/2015/08/22/msysgiterror/#" target="_blank" rel="external">参考</a></p>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>最后显示的是：<br> <figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Branch master set up to track remote branch master from git<span class="variable">@github</span>.<span class="attribute">com</span>:lyj505/lyj505.github.io.git.</span><br><span class="line">To git<span class="variable">@github</span>.<span class="attribute">com</span>:lyj505/lyj505.github.io.git</span><br><span class="line"> + cdbf547...e91a020 HEAD -&gt; master (forced update)</span><br><span class="line">INFO  Deploy <span class="attribute">done</span>: git</span><br></pre></td></tr></table></figure></p>
<h2 id="总结一下"><a href="#总结一下" class="headerlink" title="总结一下"></a>总结一下</h2><p> 1.首先我查询了下我的git版本号(git –version) 2.5.1 win10版本的。<br> 2.就相当于我配置了2个SSH key,在github账号里。。经过测试本地只有一组生效,通常来说,是不同的机器/或者不同的系统生成不同的密匙,然后添加到github账户里面,都添加进github里就是免登陆。<br> 3.不一样的key就是给不同主机用的,我在一个电脑上添加2个sshkey当然会出现错误，其实不是这样的,是设置的时候由于名字不对或者其他原因,导致的,一台主机可以配置多个sshkey,只需要设置不同的名称。留一个地址以后要用到的时候再看看—–<a href="http://yijiebuyi.com/blog/f18d38eb7cfee860c117d629fdb16faf.html" target="_blank" rel="external">电脑管理多个SSH KEY管理(for linux)</a>、<a href="http://www.cnblogs.com/fanyong/p/3962455.html" target="_blank" rel="external">window7下的多个SSH管理</a>。<br> 4.默认情况下每个账户生成的秘钥位置和名称都是相同的，这样后生成的秘钥就会覆盖前面的秘钥导致其失效。<br> 5.id_rsa和id_rsa.pub 一个公钥对应一个私钥。<br> 6.注意：密码(passphrase)设为空(要求输入密码时直接按”Enter”键),以方便不输入密码确实再把生成的id_dsa.pub(公共密钥保)拷贝到你要访问的机器上去并保存为authorized_keys.我认为我们将公钥放在github的过程就是将id_dsa.pub放在github setting里的ssh配置里。</p>
<h2 id="push的时候出现的状况"><a href="#push的时候出现的状况" class="headerlink" title="push的时候出现的状况"></a>push的时候出现的状况</h2><h3 id="验证是不是主人"><a href="#验证是不是主人" class="headerlink" title="验证是不是主人"></a>验证是不是主人</h3><p>由于之前用了一个公钥,在github里已经被我删除掉了,本地的也被最新的公钥所覆盖,所以git push 更新文件的时候会出现用户名/密码输入登录的选项。由于之前已经配置好SSH,所以现在通过几个指令让电脑认识你的分支。<br>1.你可以更新一下origin<br>怎么修改Git remote add时使用的远程仓库呢？先删后加<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git remote remove origin</span><br><span class="line"><span class="variable">$ </span>git remote add origin git<span class="variable">@github</span>.<span class="symbol">com:</span>Username/Your_Repo_Name.git</span><br></pre></td></tr></table></figure></p>
<p>之后你还需要重新设置track branch：<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">push</span></span><br></pre></td></tr></table></figure></p>
<p>会有一个出错按照提示<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> git push --<span class="keyword">set</span>-upstream <span class="comment">origin master</span></span><br></pre></td></tr></table></figure></p>
<p>解释：upstream<br>upstream与有几个远程库没有关系，它是分支与分支之间的流通道。<br>The -u tells Git to remember the parameters, so that next time we can simply run git push and Git will know what to do.<br>    　　相当于第一次串门的时候你登了个记办了个vip。。以后再来就知道是你来了。不用脱裤子搜身了。<br>2.设置了之后,就可以正确地上传至远程库了(无需输入用户名和密码)。<br>3.有个特例,我有个文件是部署在gh-page上的,demo或者是img图像可以展示在gh-page上,在那里git push的时候,要注意是:<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> git remote remove origin</span><br><span class="line"><span class="symbol">$</span> git remote add origin git@github.com:Username/Your_Repo_Name.git</span><br><span class="line">之后你还需要重新设置track branch，比如：</span><br><span class="line"><span class="symbol">$</span> git push</span><br><span class="line"><span class="symbol">$</span> git push --<span class="keyword">set</span>-upstream <span class="comment">origin gh-page    ##</span>只有这里不一样<span class="comment">,</span>注意区别<span class="comment">,</span>不然造成后果严重</span><br></pre></td></tr></table></figure></p>
<p>4.以前的项目 上传的时候需要加以上以上的步骤来消除以前秘钥对远程库的链接(说法欠妥),新建的项目直接clone下来, 上传的时候直接Git push 就可以push到远程库里。</p>

      
    </div>

    <div>
      
        
<div id="wechat_subscriber" style="display: block； padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/uploads/wechat-qcode.jpg" alt="lyjloveDT wechat" style="width: 200px; max-width: 100%;"/>
    <div>欢迎您扫一扫上面的微信公众号，订阅我的博客！</div>
</div>

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/ssh/" rel="tag">#ssh</a>
          
            <a href="/tags/git/" rel="tag">#git</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/05/28/入坑GIT/" rel="next" title="入坑GIT">
                <i class="fa fa-chevron-left"></i> 入坑GIT
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/05/30/flex布局小结/" rel="prev" title="flex布局小结(1)">
                flex布局小结(1) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          
   
   
   
   
   <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
   <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
   
       <script type="text/javascript">
           function ShowGitment(){
               document.getElementById("gitment-display-button").style.display = "none";
               document.getElementById("gitment-container").style.display = "block";
               var gitment = new Gitment({
                   id: document.location.href,
                   owner: 'lyj505',
                   repo: 'gitment',
                   oauth: {
                       client_id: '63db88b32b5e54c89dd0',
                       client_secret: '3e0a8df5d5709a174aeffa9ee3c0f335a19e5255',
                   }});
               gitment.render('gitment-container');
           }
       </script>
   

          

  
    <div class="comments" id="comments">
      
        <div onclick="showGitment()" id="gitment-display-button">显示 Gitment 评论</div>
        <div id="gitment-container" style="display:none"></div>
      
    </div>

  

    

          
        </div>

      </div>
    </main>


    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lyjloveDT</span>
  <span>All Rights Reserved.</span>
</div>


        <!--      <font id="sum_counter"></font> -->
        
      </div>

    </footer>

      <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>













  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/pjax/jquery.pjax.js"></script>

  
  <script type="text/javascript" src="/vendors/mystyle/nprogress.min.js"></script>

  
  <script type="text/javascript" src="/vendors/mystyle/mystyle.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  


  
  
  
  

  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>





<a href="https://github.com/lyj505"><img style="position: absolute; top: 0; right: 0; border: 0;height:80px;width:80px;" src="https://camo.githubusercontent.com/82b228a3648bf44fc1163ef44c62fcc60081495e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"></a>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</body>
</html>
